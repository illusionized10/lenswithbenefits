/**
 * ModuloBox Gallery PACKAGED v1.0.0
 * A simple justified layout
 *
 * @author Themeone [https://theme-one.com/]
 * Copyright Â© 2016 All Rights Reserved.
 */
!function(a,b){"function"==typeof define&&define.amd?define(b):"object"==typeof exports&&module.exports?module.exports=b():a.ModuloBox_Gallery=b()}(window,function(){"use strict";function e(a,e){if("string"==typeof a&&(a=document.querySelector(a)),!a)return!1;if(a&&a.GUID){return c[a.GUID]}this.element=a,this.options=this.extend(d,e);var g=parseInt(this.options.spacing,10);this.element.style.margin=g>0?"0 "+-g/2+"px":"";var h=this.guid=++b;this.element.GUID=h,c[h]=this,this.init()}var b=0,c={},d={rowHeight:220,spacing:4},f=e.prototype;return f.init=function(){this.getGalleryWidth(),this.getItems(),this.layout(),window.addEventListener("resize",this.resize.bind(this),!0),window.addEventListener("load",this.resize.bind(this),!1)},f.extend=function(a,b){for(var c in b)b.hasOwnProperty(c)&&(a[c]=b[c]);return a},f.getGalleryWidth=function(){this.width=parseInt(getComputedStyle(this.element,null).width,10)},f.getItems=function(){this.items=[];for(var a=this.element.querySelectorAll("img"),b=0,c=a.length;b<c;b++){for(var d=this.items[b]={},e=a[b].parentNode;"FIGURE"!==e.tagName;)e=e.parentNode;d.holder=e,d.height=a[b].getAttribute("height"),d.width=a[b].getAttribute("width"),d.width=d.width*(this.options.rowHeight/d.height)}},f.setItemSize=function(a){a.holder.style.width=a.width+"px",a.holder.style.height=a.height+"px",a.holder.style.margin=this.options.spacing/2+"px"},f.layout=function(){for(var a=0,b=1,c=[],d=0,e=this.items.length;d<e;d++)if(c.push({holder:this.items[d].holder,height:this.items[d].height,width:this.items[d].width}),(a+=this.items[d].width+this.options.spacing)>=this.width){var f=0,g=c.length*this.options.spacing;b=(this.width-g)/(a-g);for(var h=0,i=c.length;h<i;h++)c[h].height=Math.ceil(this.options.rowHeight*b),c[h].width=Math.ceil(c[h].width*b),f+=c[h].width+this.options.spacing,f>this.width&&(c[h].width-=f>this.width?f-this.width:0),this.setItemSize(c[h]);c=[],a=0}for(var j=0,k=c.length;j<k;j++)c[j].width=Math.floor(c[j].width*b),c[j].height=Math.floor(this.options.rowHeight*b),this.setItemSize(c[j]);this.resize()},f.resize=function(a,b){var c=this.width;this.getGalleryWidth(),c!==this.width&&this.layout()},e}),function(){"use strict";for(var a=document.querySelectorAll(".mobx-gallery"),b=0,c=a.length;b<c;b++){var d=JSON.parse(a[b].getAttribute("data-settings"));a[b].removeAttribute("data-settings"),new ModuloBox_Gallery(a[b],d)}}();